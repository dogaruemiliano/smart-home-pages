(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{105:function(e,t,n){e.exports=n(137)},41:function(e,t,n){"use strict";n.r(t),n.d(t,"Colors",(function(){return r}));var r={primary:"#011936",primary100:"rgba(19,21,21, 0.5)",secondary:"#F4FFFD",warning:"#F9DC5C",danger:"#ED254E",neutral:"#011936",error100:"#F7A1B2",error500:"#EB1E47",light:"#ffffbf",transparent:"rgba(0, 0, 0, 0)",disabled:"#EBEBE4"}},45:function(e,t,n){"use strict";n.r(t),n.d(t,"buildingData",(function(){return r})),n.d(t,"roomsData",(function(){return o}));var r=[{points:[[0,0],[990,0]]},{points:[[0,0],[0,100]]},{points:[[0,100],[270,100]]},{points:[[270,100],[270,260]]},{points:[[270,260],[460,260]]},{points:[[460,470],[460,780]]},{points:[[460,100],[460,400]]},{points:[[370,260],[370,520]]},{points:[[370,520],[460,520]]},{points:[[460,360],[490,360]]},{points:[[550,360],[910,360]]},{points:[[970,360],[990,360]]},{points:[[990,0],[990,780]]},{points:[[460,520],[490,520]]},{points:[[550,520],[830,520]]},{points:[[890,360],[890,520]]},{points:[[870,520],[898,520]]},{points:[[650,520],[650,780]]},{points:[[460,780],[998,780]]}],o=[{properties:{id:"Hall 1",name:"Hall 1",isLightOn:!1,empty:!1},geometry:{type:"Polygon",coordinates:[[[0,0],[0,100],[270,0],[270,100]]]}},{properties:{id:"Kitchen",name:"Kitchen",isLightOn:!1,empty:!1},geometry:{type:"Polygon",coordinates:[[[270,0],[270,260],[460,0],[460,260]]]}},{properties:{id:"Living",name:"Living",isLightOn:!1,empty:!1},geometry:{type:"Polygon",coordinates:[[[460,0],[460,360],[990,0],[990,360]]]}},{properties:{id:"Empty 1",name:"Empty 1",isLightOn:!1,empty:!0},geometry:{type:"Polygon",coordinates:[[[370,260],[370,330],[460,260],[460,330]]]}},{properties:{id:"Bath 1",name:"Bath 1",isLightOn:!1,empty:!1},geometry:{type:"Polygon",coordinates:[[[370,330],[370,520],[460,330],[460,520]]]}},{properties:{id:"Hall 2",name:"Hall 2",isLightOn:!1,empty:!1},geometry:{type:"Polygon",coordinates:[[[460,360],[460,520],[560,360],[560,520]]]}},{properties:{id:"Empty 2",name:"Empty 2",isLightOn:!1,empty:!0},geometry:{type:"Polygon",coordinates:[[[560,360],[560,520],[650,360],[650,520]]]}},{properties:{id:"Empty 3",name:"Empty 3",isLightOn:!1,empty:!0},geometry:{type:"Polygon",coordinates:[[[650,360],[650,380],[890,360],[890,380]]]}},{properties:{id:"Bath 2",name:"Bath 2",isLightOn:!1,empty:!1},geometry:{type:"Polygon",coordinates:[[[650,380],[650,520],[890,380],[890,520]]]}},{properties:{id:"Office",name:"Office",isLightOn:!1,empty:!1},geometry:{type:"Polygon",coordinates:[[[460,520],[460,780],[650,520],[650,780]]]}},{properties:{id:"Room",name:"Room",isLightOn:!1,empty:!1},geometry:{type:"Polygon",coordinates:[[[890,360],[890,520],[990,360],[990,520]],[[650,520],[650,780],[990,520],[990,780]]]}}]},48:function(e,t,n){"use strict";n.r(t),n.d(t,"loginWithPassword",(function(){return u})),n.d(t,"signupWithPassword",(function(){return d})),n.d(t,"isAuthenticated",(function(){return l}));var r=n(11),o=n.n(r),a=n(1),s=n.n(a);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f(e,!0));case 1:case"end":return t.stop()}}),null,null,null,Promise)},d=function(e){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f(e,!1));case 1:case"end":return t.stop()}}),null,null,null,Promise)},l=function(e){return e.token&&e.createdAt+e.expiresIn>Date.now()},p=function(e){return{username:e.username,token:e.access_token,tokenType:e.token_type,refreshToken:e.refresh_token,expiresIn:1e3*e.expires_in,createdAt:1e3*(e.created_at+7200)}},f=function(e,t){var n,r,o,a,i;return s.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return n="http://localhost:3000/"+(t?"oauth/token":"users"),u.next=3,s.a.awrap(fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c(c({},e),{},{client_id:"aYfbZ6xVhnkqok-mf4x249R0csoA0S9TcfDwRJ2zVwU",grant_type:"password"}))}));case 3:if((r=u.sent).ok){u.next=10;break}return u.next=7,s.a.awrap(r.json());case 7:throw o=u.sent,console.log(o),new Error("Something went wrong, response not ok");case 10:return u.next=12,s.a.awrap(r.json());case 12:return a=u.sent,i=p(c(c({},t?a:a.user),{},{username:e.username})),u.abrupt("return",i);case 15:case"end":return u.stop()}}),null,null,null,Promise)}},57:function(e,t,n){"use strict";n.r(t),n.d(t,"raiseTemperature",(function(){return c})),n.d(t,"lowerTemperature",(function(){return u})),n.d(t,"turnOn",(function(){return d})),n.d(t,"turnOff",(function(){return l})),n.d(t,"changeFanSpeed",(function(){return p})),n.d(t,"changeMode",(function(){return f})),n.d(t,"setState",(function(){return y}));var r=["auto","heat","cool","dry","fan"],o=["low","medium","high","auto"],a=function(e){var t,n;switch(e){case"cool":t=19,n=30;break;case"heat":t=17,n=28;break;case"auto":t=17,n=30;break;case"fan":default:return null}return{min:t,max:n}},s=n(6),i=n(14),c=Object(s.createAsyncThunk)("home/raiseTemperature",(function(){return console.log("raiseTemperature")})),u=Object(s.createAsyncThunk)("home/lowerTemperature",(function(){return console.log("lowerTemperature")})),d=Object(s.createAsyncThunk)("home/turnOn",(function(){return console.log("turnOn")})),l=Object(s.createAsyncThunk)("home/turnOff",(function(){return console.log("turnOff")})),p=Object(s.createAsyncThunk)("home/changeFanSpeed",(function(){return console.log("changeFanSpeed")})),f=Object(s.createAsyncThunk)("home/changeMode",(function(){return console.log("changeMode")})),g=Object(s.createSlice)({name:"ac",initialState:{isLoading:!0,settings:{power:!1,mode:"cool",temperature:{cool:21,dry:21,heat:28,auto:22,fan:0},fanSpeed:"low"}},reducers:{setState:function(e,t){}},extraReducers:function(e){e.addCase(d.pending,(function(e){e.isLoading=!0})),e.addCase(d.fulfilled,(function(e,t){e.settings.power=!0,e.isLoading=!1})),e.addCase(d.rejected,(function(e,t){console.log(t),i.default.alert("There was an error",t.error.message,[{text:"Close",style:"cancel"}]),e.isLoading=!1})),e.addCase(l.pending,(function(e){e.isLoading=!0})),e.addCase(l.fulfilled,(function(e,t){e.settings.power=!1,e.isLoading=!1})),e.addCase(l.rejected,(function(e,t){console.log(t),i.default.alert("There was an error",t.error.message,[{text:"Close",style:"cancel"}]),e.isLoading=!1})),e.addCase(c.pending,(function(e){e.isLoading=!0})),e.addCase(c.fulfilled,(function(e){var t,n=null==(t=a(e.settings.mode))?void 0:t.max,r=e.settings.temperature[e.settings.mode];n&&r&&r<n&&(e.settings.temperature[e.settings.mode]+=1),e.isLoading=!1})),e.addCase(c.rejected,(function(e,t){console.log(t),i.default.alert("There was an error",t.error.message,[{text:"Close",style:"cancel"}]),e.isLoading=!1})),e.addCase(u.pending,(function(e){e.isLoading=!0})),e.addCase(u.fulfilled,(function(e){var t,n=null==(t=a(e.settings.mode))?void 0:t.min,r=e.settings.temperature[e.settings.mode];n&&r&&r>n&&(e.settings.temperature[e.settings.mode]-=1),e.isLoading=!1})),e.addCase(u.rejected,(function(e,t){console.log(t),i.default.alert("There was an error",t.error.message,[{text:"Close",style:"cancel"}]),e.isLoading=!1})),e.addCase(p.pending,(function(e){e.isLoading=!0})),e.addCase(p.fulfilled,(function(e){var t=o.findIndex((function(t){return t===e.settings.fanSpeed}));e.settings.fanSpeed=o[(t+1)%o.length],e.isLoading=!1})),e.addCase(p.rejected,(function(e,t){console.log(t),i.default.alert("There was an error",t.error.message,[{text:"Close",style:"cancel"}]),e.isLoading=!1})),e.addCase(f.pending,(function(e){e.isLoading=!0})),e.addCase(f.fulfilled,(function(e){var t=r.findIndex((function(t){return t===e.settings.mode}));e.settings.mode=r[(t+1)%r.length],e.isLoading=!1})),e.addCase(f.rejected,(function(e,t){console.log(t),i.default.alert("There was an error",t.error.message,[{text:"Close",style:"cancel"}]),e.isLoading=!1}))}}),y=g.actions.setState;t.default=g.reducer},58:function(e,t,n){"use strict";n.r(t),n.d(t,"login",(function(){return u})),n.d(t,"signup",(function(){return d})),n.d(t,"logout",(function(){return l})),n.d(t,"setState",(function(){return g}));var r=n(1),o=n.n(r),a=n(6),s=n(14),i=n(48),c=n(67),u=Object(a.createAsyncThunk)("auth/login",(function(e){return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.awrap(Object(i.loginWithPassword)(e));case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new Error(t.t0);case 9:case"end":return t.stop()}}),null,null,[[0,6]],Promise)})),d=Object(a.createAsyncThunk)("auth/signup",(function(e){var t;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.a.awrap(Object(i.signupWithPassword)(e));case 3:return t=n.sent,n.abrupt("return",t);case 7:throw n.prev=7,n.t0=n.catch(0),new Error(n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]],Promise)})),l=Object(a.createAsyncThunk)("auth/logout",(function(e){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Nada logout");case 1:case"end":return e.stop()}}),null,null,null,Promise)})),p={username:"",token:"",tokenType:"",refreshToken:"",createdAt:0,expiresIn:0,isLoading:!1},f=Object(a.createSlice)({name:"auth",initialState:p,reducers:{setState:function(e,t){for(var n in Object.keys(e));}},extraReducers:function(e){e.addCase(u.pending,(function(e){e.isLoading=!0})),e.addCase(u.fulfilled,(function(e,t){e.createdAt=t.payload.createdAt,e.expiresIn=t.payload.expiresIn,e.token=t.payload.token,e.refreshToken=t.payload.refreshToken,e.tokenType=t.payload.tokenType,Object(c.storeAuthDataToSecureAsync)(t.payload),e.isLoading=!1})),e.addCase(u.rejected,(function(e,t){console.log(t),s.default.alert("There was an error",t.error.message,[{text:"Close",style:"cancel"}]),e.isLoading=!1})),e.addCase(d.fulfilled,(function(e,t){e.createdAt=t.payload.createdAt,e.expiresIn=t.payload.expiresIn,e.token=t.payload.token,e.refreshToken=t.payload.refreshToken,e.tokenType=t.payload.tokenType})),e.addCase(d.rejected,(function(e,t){console.log(t),s.default.alert("There was an error",t.error.message,[{text:"Close",style:"cancel"}])})),e.addCase(l.fulfilled,(function(e){e.createdAt=p.createdAt,e.expiresIn=p.expiresIn,e.token=p.token,e.refreshToken=p.refreshToken,e.tokenType=p.tokenType})),e.addCase(l.rejected,(function(e,t){s.default.alert("There was an error",t.error.message,[{text:"Close",style:"cancel"}])}))}}),g=f.actions.setState;t.default=f.reducer},67:function(e,t,n){"use strict";n.r(t),n.d(t,"getAuthDataFromSecureAsync",(function(){return c})),n.d(t,"storeAuthDataToSecureAsync",(function(){return u}));var r=n(22),o=n.n(r),a=n(1),s=n.n(a),i=n(17),c=function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(i.getItemAsync("username"));case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0="";case 5:return e.t1=e.t0,e.next=8,s.a.awrap(i.getItemAsync("token"));case 8:if(e.t2=e.sent,e.t2){e.next=11;break}e.t2="";case 11:return e.t3=e.t2,e.next=14,s.a.awrap(i.getItemAsync("tokenType"));case 14:if(e.t4=e.sent,e.t4){e.next=17;break}e.t4="";case 17:return e.t5=e.t4,e.next=20,s.a.awrap(i.getItemAsync("refreshToken"));case 20:if(e.t6=e.sent,e.t6){e.next=23;break}e.t6="";case 23:return e.t7=e.t6,e.t8=parseInt,e.next=27,s.a.awrap(i.getItemAsync("createdAt"));case 27:if(e.t9=e.sent,e.t9){e.next=30;break}e.t9="";case 30:return e.t10=e.t9,e.t11=(0,e.t8)(e.t10),e.t12=parseInt,e.next=35,s.a.awrap(i.getItemAsync("expiresIn"));case 35:if(e.t13=e.sent,e.t13){e.next=38;break}e.t13="";case 38:return e.t14=e.t13,e.t15=(0,e.t12)(e.t14),e.next=42,s.a.awrap(i.getItemAsync("isLoading"));case 42:if(e.t16=e.sent,e.t16){e.next=45;break}e.t16="";case 45:return e.t17=!!e.t16,e.abrupt("return",{username:e.t1,token:e.t3,tokenType:e.t5,refreshToken:e.t7,createdAt:e.t11,expiresIn:e.t15,isLoading:e.t17});case 47:case"end":return e.stop()}}),null,null,null,Promise)},u=function(e){var t,n,r,a,c,u;return s.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:d.prev=0,t=0,n=Object.entries(e);case 2:if(!(t<n.length)){d.next=13;break}return r=n[t],a=o()(r,2),c=a[0],u=a[1],d.next=9,s.a.awrap(i.setItemAsync(c,u.toString()));case 9:d.sent;case 10:t++,d.next=2;break;case 13:d.next=18;break;case 15:return d.prev=15,d.t0=d.catch(0),d.abrupt("return",!1);case 18:return d.abrupt("return",!0);case 19:case"end":return d.stop()}}),null,null,[[0,15]],Promise)}},71:function(e,t,n){"use strict";n.r(t),n.d(t,"fetchData",(function(){return a})),n.d(t,"setState",(function(){return c})),n.d(t,"toggleLight",(function(){return u}));var r=n(6),o=n(45),a=Object(r.createAsyncThunk)("home/fetchData",(function(){return o.roomsData})),s=Object(r.createSlice)({name:"home",initialState:{rooms:[]},reducers:{setState:function(e,t){e.rooms=o.roomsData},toggleLight:function(e,t){var n=e.rooms.findIndex((function(e){return e.properties.id===t.payload.roomId}));e.rooms[n].properties.isLightOn=!e.rooms[n].properties.isLightOn}},extraReducers:function(e){}}),i=s.actions,c=i.setState,u=i.toggleLight;t.default=s.reducer},95:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h}));var r=n(94),o=n(8),a=n(96),s=n(142),i=n(54),c=n(41),u=n(6),d=n(58),l=n(71),p=n(57),f=Object(u.configureStore)({reducer:{auth:d.default,home:l.default,ac:p.default}}),g=n(0),y=n(20),m=Object(g.lazy)((function(){return Promise.all([n.e(2),n.e(4)]).then(n.bind(null,324))}));function h(){return Object(y.jsx)(a.SafeAreaProvider,{children:Object(y.jsxs)(s.SafeAreaView,{style:b.container,children:[Object(y.jsx)(r.StatusBar,{style:"light"}),Object(y.jsx)(i.Provider,{store:f,children:Object(y.jsx)(m,{})})]})})}console.log("Naviii"),console.log(m);var b=o.default.create({container:{flex:1,backgroundColor:c.Colors.primary,color:c.Colors.neutral}})}},[[105,1,3]]]);
//# sourceMappingURL=app.3379c814.chunk.js.map